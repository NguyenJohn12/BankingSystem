<%- include("partials/header.ejs") %>

<div class="content">
  <h3>Account Records</h3>
  
  <% if (typeof error !== 'undefined' && error) { %>
    <div class="error-message"><%= error %></div>
  <% } %>

  <!-- Main Account Table -->
  <table class="data-table">
    <thead>
      <tr>
        <th>Account_ID</th>
        <th>Customer_ID</th>
        <th>Account_Status</th>
        <th>Account_type</th>
        <th>Account_number</th>
        <th>Balance</th>
        <th>Open_date</th>
        <th>min_balance</th>
        <th>overdraft_balance</th>
      </tr>
    </thead>
    <tbody>
      <% if (typeof accounts !== 'undefined' && accounts.length > 0) { %>
        <% accounts.forEach(function(account) { %>
          <tr>
            <td><%= account.account_id %></td>
            <td><%= account.customer_id %></td>
            <td><%= account.account_status %></td>
            <td><%= account.account_type %></td>
            <td><%= account.account_number %></td>
            <td>$<%= parseFloat(account.balance).toFixed(2) %></td>
            <td><%= account.open_date ? new Date(account.open_date).toLocaleDateString() : 'N/A' %></td>
            <td>$<%= parseFloat(account.min_balance).toFixed(2) %></td>
            <td>$<%= parseFloat(account.overdraft_balance).toFixed(2) %></td>
          </tr>
        <% }) %>
      <% } else { %>
        <tr>
          <td colspan="9" style="text-align: center;">No records found.</td>
        </tr>
      <% } %>
    </tbody>
  </table>

  <!-- Credit_Account Table -->
  <h4>Credit Accounts</h4>
  <table class="data-table">
    <thead>
      <tr>
        <th>Account_ID</th>
        <th>Credit_limit</th>
        <th>Due_date</th>
        <th>Payment_percent</th>
      </tr>
    </thead>
    <tbody>
      <% if (typeof creditAccounts !== 'undefined' && creditAccounts.length > 0) { %>
        <% creditAccounts.forEach(function(creditAccount) { %>
          <tr>
            <td><%= creditAccount.account_id %></td>
            <td>$<%= parseFloat(creditAccount.credit_limit).toFixed(2) %></td>
            <td><%= creditAccount.due_date ? new Date(creditAccount.due_date).toLocaleDateString() : 'N/A' %></td>
            <td><%= parseFloat(creditAccount.payment_percent).toFixed(2) %>%</td>
          </tr>
        <% }) %>
      <% } else { %>
        <tr>
          <td colspan="4" style="text-align: center;">No records found.</td>
        </tr>
      <% } %>
    </tbody>
  </table>

  <!-- Debit_Account Table -->
  <h4>Debit Accounts</h4>
  <table class="data-table">
    <thead>
      <tr>
        <th>Account_ID</th>
        <th>Daily_withdrawal_limit</th>
      </tr>
    </thead>
    <tbody>
      <% if (typeof debitAccounts !== 'undefined' && debitAccounts.length > 0) { %>
        <% debitAccounts.forEach(function(debitAccount) { %>
          <tr>
            <td><%= debitAccount.account_id %></td>
            <td>$<%= parseFloat(debitAccount.daily_withdrawal_limit).toFixed(2) %></td>
          </tr>
        <% }) %>
      <% } else { %>
        <tr>
          <td colspan="2" style="text-align: center;">No records found.</td>
        </tr>
      <% } %>
    </tbody>
  </table>

  <!-- Investment_Account Table -->
  <h4>Investment Accounts</h4>
  <table class="data-table">
    <thead>
      <tr>
        <th>Account_ID</th>
        <th>risk_level</th>
        <th>Strategy</th>
        <th>Percent_return</th>
      </tr>
    </thead>
    <tbody>
      <% if (typeof investmentAccounts !== 'undefined' && investmentAccounts.length > 0) { %>
        <% investmentAccounts.forEach(function(investmentAccount) { %>
          <tr>
            <td><%= investmentAccount.account_id %></td>
            <td><%= investmentAccount.risk_level %></td>
            <td><%= investmentAccount.strategy || 'N/A' %></td>
            <td><%= investmentAccount.percent_return ? parseFloat(investmentAccount.percent_return).toFixed(2) + '%' : 'N/A' %></td>
          </tr>
        <% }) %>
      <% } else { %>
        <tr>
          <td colspan="4" style="text-align: center;">No records found.</td>
        </tr>
      <% } %>
    </tbody>
  </table>
</div>

<%- include("partials/footer.ejs") %>